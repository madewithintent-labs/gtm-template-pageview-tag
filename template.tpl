___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Made with Intent Pageview",
  "categories": ["ANALYTICS", "PERSONALIZATION"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "GROUP",
    "name": "Mandatory Fields",
    "displayName": "Mandatory Fields",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "pageType",
        "displayName": "Page Type",
        "simpleValueType": true
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "Ecommerce Fields",
    "displayName": "Ecommerce Fields",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "item_name",
        "displayName": "Product Name",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "item_id",
        "displayName": "Product SKU",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "price",
        "displayName": "Price",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "currency",
        "displayName": "Currency",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "item_brand",
        "displayName": "Brand",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "item_category",
        "displayName": "Category",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "item_subcategory",
        "displayName": "Subcategory",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "item_variant",
        "displayName": "Variant",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "item_availability",
        "displayName": "Availability",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "item_on_sale",
        "displayName": "On sale?",
        "simpleValueType": true,
        "help": "0 or 1"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');
const callInWindow = require('callInWindow');

(function() {
  
  const productTags = {
    product_name: data.item_name || '',
    product_sku: data.item_id || '',
    product_price: data.price || '0',
    product_currency: data.currency || '',
    product_brand: data.item_brand || '',
    product_category: data.item_category || '',
    product_subcategory: data.item_subcategory || '',
    product_variant: data.item_variant || '',
    product_image_url: data.image_url || '',
    product_rating: data.item_rating || '',
    product_review_count: data.item_review_count || '',
    product_availability: data.item_availability || 1,
    product_on_sale: data.item_on_sale || 0,
  };
  
  callInWindow('intent.dataLayer.push', {
    type: 'Pageview',
    data: {
      page_type: data.pageType || '',
      product_tags: data.pageType == 'pdp' ? productTags : {}
    }
  });
  
  data.gtmOnSuccess();
  
})();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "intent.dataLayer.push"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 13/05/2024, 17:36:30


